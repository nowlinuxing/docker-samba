# Setting up Samba as a Standalone Server - SambaWiki
# https://wiki.samba.org/index.php/Setting_up_Samba_as_a_Standalone_Server

[global]
	log file = /var/log/samba/%m
	log level = 1

<% @param["sections"].each do |section_name, section_params| -%>
[<%= section_name %>]
  <%
     params = {
       "path"        => "/mount/#{section_name}",
       "browsable"   => "yes",
       "read only"   => "no",
       "guest ok"    => "no",
       "valid users" => @param["users"].map { |user| user["name"] }.join(", ")
     }.merge(section_params[:params] || {})
  %>
  <%- params.each do |name, value| %>
    <%= name %> = <%= value -%>
  <% end %>
<% end %>
